@using PineLabsShoppingPortal.Properties
@using PineLabsShoppingPortal.Models
@{
    Layout = null;
    User current_user = (Session["UserDetail"] != null) ? Session["UserDetail"] as User : null;
}

<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <title>Buy gift card and voucher</title>
    <link href="~/https://fonts.googleapis.com/css?family=Work+Sans:300,400,500,600,700&amp;amp;subset=latin-ext" rel="stylesheet">
    <link rel="stylesheet" href="~/plugins/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="~/fonts/Linearicons/Linearicons/Font/demo-files/demo.css">
    <link rel="stylesheet" href="~/plugins/bootstrap4/css/bootstrap.min.css">
    <link rel="stylesheet" href="~/plugins/owl-carousel/assets/owl.carousel.css">
    <link rel="stylesheet" href="~/plugins/slick/slick/slick.css">
    <link rel="stylesheet" href="~/plugins/lightGallery-master/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="~/plugins/jquery-bar-rating/dist/themes/fontawesome-stars.css">
    <link rel="stylesheet" href="~/plugins/jquery-ui/jquery-ui.min.css">
    <link rel="stylesheet" href="~/plugins/select2/dist/css/select2.min.css">
    <link rel="stylesheet" href="~/css/style.css">
    <link rel="stylesheet" href="~/css/market-place-3.css">
    <link rel="stylesheet" href="~/css/discounttadka-rohit.css">
</head>
<body>
    @*/***HEADER FOR WEBSITE**/*@
    <header class="header header--market-place-3" data-sticky="true">
        <div class="header__top">
            <div class="container">
                <div class="header__left">
                    <div class="menu--product-categories">
                        <div class="menu__toggle"><i class="icon-menu"></i><span>Gift Voucher Category</span></div>
                        <div class="menu__content websiteHeaderMenu" id="websiteHeaderMenu">
                            @***Menus will render form homepagemenucontainer partial view ****@
                        </div>
                    </div>
                    <a class="ps-logo" href="@Url.Action("Index", "Home")">
                        @*<div class="logobox" align="center"> <img src="~/img/logo3.png" class="logoimg" alt=""> </div>*@
                    </a>
                </div>
                <div class="header__center">
                    <form class="ps-form--quick-search" action="#" method="get">
                        <div class="form-group--icon">
                            <i class="icon-chevron-down"></i>
                            <select class="form-control">
                                <option value="1">All</option>
                                @*<option value="1">Bags</option>
                                <option value="1">Shoes</option>
                                <option value="1">Men</option>
                                <option value="1">Women</option>
                                <option value="1">Sunglasses</option>*@
                            </select>
                        </div>
                        <input class="form-control" type="text" placeholder="I'm shopping for...">
                        <button>Search</button>
                    </form>
                </div>
                <div class="header__right">
                    <div class="header__actions">

                        <div class="ps-cart--mini">
                            <a class="header__extra" href="@Url.Action("GetCartRelatedListView", "Home", new { pageName = Resources.ShoppingCartDetailPage})"><i class="icon-bag2"></i><span><i id="cartCount">0</i></span></a>
                            <div class="ps-cart__content cartContent">

                            </div>
                        </div>


                        <div class="ps-block--user-header" style="width:39%;">
                            <div class="ps-block__right"> Call Us : <strong><br>  +91 124567890 </strong>  </div>
                        </div>


                        <div class="ps-block--user-header">
                            <div class="ps-block__left"><i class="icon-user"></i></div>
                            <div class="ps-block__right">
                                @if (current_user == null)
                                {
                                    <a href="@Url.Action("Index", "Login")">Login</a>
                                    <a href="@Url.Action("Index", "Login")">Register</a>
                                }
                                else
                                {
                                    <div>
                                        Welcome @current_user.Firstname
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <nav class="navigation">
            <div class="container">
                <div class="navigation__left">
                    <div class="menu--product-categories">
                        <div class="menu__toggle active"><i class="icon-menu"></i><span> Gift Voucher Category</span></div>
                        <div class="menu__content websiteHeaderMenu"></div>
                    </div>
                </div>
                <div class="navigation__right">
                    <ul class="menu menu--recent-view"></ul>
                    <ul class="navigation__extra">
                        <li>
                            <div class="ps-dropdown">
                                @*<a href="#">Sell With Us! </a>*@
                                @*<ul class="ps-dropdown-menu">
                                    <li><a href="#">Become A Vendor </a></li>
                                    <li><a href="#">Vendor Login </a></li>
                                </ul>*@
                            </div>
                        </li>


                        @if (current_user != null)
                        {
                            <li>
                                <div class="ps-dropdown">
                                    <a href="#">My Account </a>
                                    <ul class="ps-dropdown-menu">
                                        <li><a href="#"><strong>@current_user.Firstname @current_user.Lastname</strong> </a></li>
                                        <li> <hr> </li>
                                        <li><a href="#">User Profile</a></li>
                                        <li><a href="~/Home/MyOredrsReport">Orders</a></li>
                                        <li><a href="#">My Discount Coupons  </a></li>
                                        @*<li><a href="#">Point Ledger</a></li>*@

                                        <li><a href="#">DB Login</a></li>
                                        <li><a href="@Url.Action("LogOut", "Login")">Log Out </a></li>
                                    </ul>
                                </div>
                            </li>

                            @*<li><a href="#"> Balance Point : 15000</a></li>*@
                            @*<li><a href="#"> Wallet Balance:@current_user.Balance</a></li>*@
                        }
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    @*/***HEADER FOR WEBSITE----end**/*@
    @*/***HEADER FOR MOBILE**/*@
    <header class="header header--mobile" data-sticky="true">
        @RenderPage("~/Views/Shared/mobileHeader.cshtml")
    </header>
    @*/***HEADER FOR MOBILE----END**/*@
    @*/******CART DESIGN********/*@
    <div class="ps-panel--sidebar" id="cart-mobile">
        <div class="ps-panel__header">
            <h3>Shopping Cart</h3>
        </div>

        <div class="navigation__content">
            <div class="ps-cart--mobile">
                <div class="ps-cart__content cartContent">
                </div>
            </div>
        </div>
    </div>
    @**********MENU DESIGN******@
    @RenderPage("~/Views/Shared/navigationMobile.cshtml")
    @**********MENU DESIGN*------END*****@
    @**********navigation MOBILE MENU DESIGN******@
    @RenderPage("~/Views/Shared/navigationList.cshtml")
    @**********navigation MOBILE MENU DESIGN*----END*****@
    @***********SEARCH BAR*******@
    <div class="ps-panel--sidebar" id="search-sidebar">
        <div class="ps-panel__header">
            <form class="ps-form--search-mobile" action="#" method="get">
                <div class="form-group--nest">
                    <input class="form-control" type="text" placeholder="Search something...">
                    <button><i class="icon-magnifier"></i></button>
                </div>
            </form>
        </div>
        <div class="navigation__content"></div>
    </div>
    @***********SEARCH BAR*----END******@
    @************MOBILE other MENUS*******@
    <div class="ps-panel--sidebar" id="menu-mobile">
        @RenderPage("~/Views/Shared/menuMobile.cshtml")
    </div>
    @************MOBILE MENUS**-------END*****@
    @****Render Body Section****@
    @RenderBody()
    @******FOOTER********@
    @RenderPage("~/Views/Shared/_footer.cshtml")
    @******FOOTE0R----END********@
    @******OTHER SECTION********@
    <div id="back2top"><i class="pe-7s-angle-up"></i></div>
    <div class="ps-site-overlay"></div>
    <div id="loader-wrapper">
        <div class="loader-section section-left"></div>
        <div class="loader-section section-right"></div>
    </div>
    <div class="ps-search" id="site-search">
        <a class="ps-btn--close" href="#"></a>
        <div class="ps-search__content">
            <form class="ps-form--primary-search" action="#" method="post">
                <input class="form-control" type="text" placeholder="Search for...">
                <button><i class="aroma-magnifying-glass"></i></button>
            </form>
        </div>
    </div>
    @******OTHER SECTION*----END*******@
</body>
<!-- Trigger the modal with a button -->
<!-- Modal -->
<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog modal-lg modalwidth">
        <div class="modal-content modalcontentcss">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <iframe src="ifream-textpage.html" id="info" class="iframe" name="info" seamless="" height="100%" width="100%"></iframe>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
</html>
@**********SCRIPT SECTION***********@
<script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
<script src="~/plugins/jquery-1.12.4.min.js"></script>
<script src="~/plugins/popper.min.js"></script>
<script src="~/plugins/owl-carousel/owl.carousel.min.js"></script>
<script src="~/plugins/bootstrap4/js/bootstrap.min.js"></script>
<script src="~/plugins/imagesloaded.pkgd.min.js"></script>
<script src="~/plugins/masonry.pkgd.min.js"></script>
<script src="~/plugins/isotope.pkgd.min.js"></script>
<script src="~/plugins/jquery.matchHeight-min.js"></script>
<script src="~/plugins/slick/slick/slick.min.js"></script>
<script src="~/plugins/jquery-bar-rating/dist/jquery.barrating.min.js"></script>
<script src="~/plugins/slick-animation.min.js"></script>
<script src="~/plugins/lightGallery-master/dist/js/lightgallery-all.min.js"></script>
<script src="~/plugins/jquery-ui/jquery-ui.min.js"></script>
<script src="~/plugins/sticky-sidebar/dist/sticky-sidebar.min.js"></script>
<script src="~/plugins/jquery.slimscroll.min.js"></script>
<script src="~/plugins/select2/dist/js/select2.full.min.js"></script>
<script src="~/plugins/gmap3.min.js"></script>
<!-- custom scripts-->
<script src="~/js/main.js"></script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDxflHHc5FlDVI-J71pO7hM1QJNW1dRp4U&amp;region=GB"></script>
@**********SCRIPT SECTION*----END**********@
<script type="text/javascript">
    $(document).ready(function () {
        debugger;
        $(".preloader").hide();
        $.ajax({
            type: "GET",
            async: false,
            url: "/Home/LoadMenus",
            success: function (result) {
                $(".websiteHeaderMenu").html(result);
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert("Status: " + textStatus); alert("Error: " + errorThrown);
            }
        });

        GetCartCount();
        GetHeaderCartDetailView();
    });

    function GetCartCount() {
        debugger;
        $.ajax({
            type: "GET",
            async: false,
            url: "/Home/GetCartCount",
            success: function (data) {
                debugger;
                //alert("hii");
                //alert(data);
                $("#cartCount").html(data);

            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                //alert("Status: " + textStatus); alert("Error: in cart count " + errorThrown);
            }
        });
    }

    function GetHeaderCartDetailView() {
        $.ajax({
            type: "GET",
            async: false,
            url: "/Home/GetHeaderCartList",
            success: function (result) {
                $(".cartContent").html(result);

                $('a[name=deleteCartFunction]').unbind();
                $('a[name=deleteCartFunction]').click(function (e) {
                    DeleteDetail(this);
                });
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                //   alert("Status: " + textStatus); alert("Error: " + errorThrown);
            }
        });
    }



    function DeleteDetail(thisVar) {

        $(".preloader").show();
        var idVal = $(thisVar).attr("data-id");

        $.ajax({
            url: '/Home/DeleteCart',
            type: 'Post',
            datatype: 'Json',
            data: { cartId: idVal }
        }).done(function (result) {
            $(".preloader").hide();
            alert(result);
            location.reload();
        }).fail(function (error) {
            $("#error").html(error.statusText);
            $(".preloader").hide();
        });

        return false;
    }
</script>
